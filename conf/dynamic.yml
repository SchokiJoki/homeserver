http:
  routers:
    nextcloud:
      rule: "Host(`nextcloud.home`)"
      entryPoints:
        - websecure
      tls: true
      service: nextcloud-svc
      middlewares:
        - nextcloud-timeout

  middlewares:
    SslHeader:
      headers:
        customRequestHeaders:
          X-Forwarded-Proto: "https"
    nextcloud-timeout:
      headers:
        customRequestHeaders:
          Keep-Alive: "timeout=600, max=1000"
        customResponseHeaders:
          Keep-Alive: "timeout=600"

  services:
    nextcloud-svc:
      loadBalancer:
        passHostHeader: false
        servers:
          - url: "http://nextcloud-aio-apache:11000"


tls:
  certificates:
    - certFile: /certs/nextcloud.home.pem
      keyFile: /certs/nextcloud.home-key.pem
    - certFile: /certs/pihole.home.pem
      keyFile: /certs/pihole.home-key.pem
    - certFile: /certs/portainer.home.pem
      keyFile: /certs/portainer.home-key.pem
    - certFile: /certs/pdf.home.pem
      keyFile: /certs/pdf.home-key.pem
    - certFile: /certs/traefik.home.pem
      keyFile: /certs/traefik.home-key.pem
    - certFile: /certs/heimdall.home.pem
      keyfile:  /certs/heimdall.home-key.pem
    - certFile: /certs/wg.home.pem
      keyfile:  /certs/wg.home-key.pem
    - certFile: /certs/paperless.home.pem
      keyfile:  /certs/paperless.home-key.pem
    - certFile: /certs/passbolt.home.pem
      keyfile:  /certs/passbolt.home-key.pem
    - certFile: /certs/assistant.home.pem
      keyfile:  /certs/assistant.home-key.pem
    - certFile: /certs/jellyfin.home.pem
      keyfile:  /certs/jellyfin.home-key.pem
    - certFile: /certs/scrutiny.home.pem
      keyfile:  /certs/scrutiny.home-key.pem
    - certFile: /certs/smtp.home.pem
      keyfile:  /certs/smtp.home-key.pem
    - certFile: /certs/mail.home.pem
      keyfile:  /certs/mail.home-key.pem
